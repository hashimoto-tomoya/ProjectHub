# レビュアー選定ガイドライン

## 概要

レビュー対象ドキュメントに応じて、プロジェクトのステークホルダー情報から最大3名のレビュアーを選定する。
選定は特定のステークホルダー名ではなく、**関心領域（Concern Area）** に基づいて行う。

## ステークホルダー情報の読み込み

テンプレートに応じて読み込み元が異なる:

| テンプレート | 読み込み元 |
|------------|-----------|
| Full | `docs/01-requirements/project-overview/stakeholders.md` |
| Small | `docs/01-requirements/project-overview.md` の「ステークホルダー」セクション |

## 選定プロセス

```
1. ステークホルダー情報を読み込む（上記テンプレート別の読み込み元から）
2. 各ステークホルダーを関心領域に分類する（→ ステークホルダー分類ルール）
3. レビュー対象の関心領域を特定する（→ ドキュメント別 必要関心領域）
4. 優先度順に最大3名を選定する
```

## ステークホルダー分類ルール

ステークホルダー情報に記載された各ステークホルダーの役割・責務を読み取り、以下の関心領域に分類する。
1人のステークホルダーが複数の関心領域に該当する場合がある。

| 関心領域 | 分類キーワード（役割・責務にこれらが含まれれば該当） |
|---------|----------------------------------------------|
| BIZ: ビジネス判断 | 事業戦略、ROI、投資判断、経営、事業責任、予算 |
| DOMAIN: ドメイン知識 | 業務フロー、業務ルール、ビジネスロジック、業界知識、事業運営 |
| MGMT: プロジェクト管理 | スケジュール、スコープ、リスク管理、進捗、リソース、プロジェクト推進 |
| MKT: マーケティング・グロース | マーケティング、CVR、SEO、集客、CRM、LTV、プロモーション |
| FE: フロントエンド技術 | UI実装、フロントエンド、画面開発、SPA、レスポンシブ |
| BE: バックエンド技術 | API、サーバーサイド、アーキテクチャ、DB設計、バックエンド開発 |
| INFRA: インフラ・運用 | クラウド、ネットワーク、CI/CD、監視、運用、SRE、インフラ構築 |
| SEC: セキュリティ | セキュリティ、認証、認可、暗号化、脆弱性、コンプライアンス |
| QA: 品質管理 | テスト、品質保証、QA、品質管理、テスト自動化 |
| UX: デザイン・UX | UI/UXデザイン、ユーザビリティ、アクセシビリティ、デザインシステム |
| USER: ユーザー視点 | エンドユーザー、顧客体験、利用者、ユーザー代表 |

**分類の注意:**

- 役割名だけでなく、ステークホルダー情報に記載されている責務・関心事の説明文も考慮する
- 明確に分類できないステークホルダーは、最も近い関心領域に割り当てる
- 「プロジェクトオーナー」のような上位役職は BIZ + MGMT など複数に該当しやすい

## ドキュメント別 必要関心領域

### Smallテンプレートの場合

フラットファイル構成に対応したカテゴリマッピング:

#### フェーズ1: 要件定義

| カテゴリ | ファイル名 | 必要関心領域（優先度順） |
|---------|----------|----------------------|
| プロジェクト概要 | project-overview.md | BIZ → DOMAIN → MGMT |
| 機能要件 | functional-requirements.md | DOMAIN → BE → FE |
| 非機能要件 | non-functional-requirements.md | INFRA → BE → QA |

#### フェーズ2: 方式設計

| カテゴリ | ファイル名 | 必要関心領域（優先度順） |
|---------|----------|----------------------|
| アーキテクチャ方式 | architecture.md | BE → INFRA → FE |
| インフラ・運用方式 | infrastructure.md | INFRA → SEC → MGMT |

※ Smallではセキュリティ・データ・運用がinfrastructure.mdに統合されているため、必要関心領域にSECを含める。

#### フェーズ3: 基本設計

| カテゴリ | ファイル名 | 必要関心領域（優先度順） |
|---------|----------|----------------------|
| 画面設計 | screen-design.md | FE → UX → USER |
| データモデル | data-model.md | BE → INFRA → QA |
| API設計 | api-design.md | BE → FE → QA |

#### フェーズ4: 詳細設計

| カテゴリ | ファイル名 | 必要関心領域（優先度順） |
|---------|----------|----------------------|
| コンポーネント設計 | component-design.md | BE → FE → QA |
| テスト設計 | testing.md | QA → BE → FE |

---

### Fullテンプレートの場合

ディレクトリベースのカテゴリマッピング:

#### フェーズ1: 要件定義

| ドキュメントカテゴリ | パスパターン | 必要関心領域（優先度順） |
|-------------------|-----------|----------------------|
| プロジェクト概要 | project-overview/ | BIZ → DOMAIN → MGMT |
| ビジネス要件 | business-requirements/ | DOMAIN → MKT → BIZ |
| 機能要件 | functional-requirements/ | DOMAIN → BE → FE |
| 非機能要件 | non-functional-requirements/ | INFRA → BE → QA |
| ユースケース | use-cases/ | USER → DOMAIN → QA |

#### フェーズ2: 方式設計

| ドキュメントカテゴリ | パスパターン | 必要関心領域（優先度順） |
|-------------------|-----------|----------------------|
| アーキテクチャ方式 | architecture/ | BE → INFRA → FE |
| インフラ方式 | infrastructure/ | INFRA → BE → QA |
| セキュリティ方式 | security/ | SEC → INFRA → QA |
| データ方式 | data/ | BE → INFRA → QA |
| 運用方式 | operations/ | INFRA → MGMT → QA |

#### フェーズ3: 基本設計

| ドキュメントカテゴリ | パスパターン | 必要関心領域（優先度順） |
|-------------------|-----------|----------------------|
| システム構成 | system-architecture/ | BE → INFRA → FE |
| 画面設計 | screen-design/ | FE → UX → USER |
| データモデル | data-model/ | BE → INFRA → QA |
| API設計 | api-design/ | BE → FE → QA |
| バッチ設計 | batch-design/ | BE → INFRA → QA |

#### フェーズ4: 詳細設計

| ドキュメントカテゴリ | パスパターン | 必要関心領域（優先度順） |
|-------------------|-----------|----------------------|
| コンポーネント設計 | component-design/ | BE → FE → QA |
| シーケンス図 | sequence-diagrams/ | BE → FE → QA |
| エラーハンドリング | error-handling/ | BE → QA → FE |
| テスト設計 | testing/ | QA → BE → FE |

## 選定アルゴリズム

```
入力: レビュー対象のドキュメントカテゴリ、ステークホルダー一覧
出力: レビュアー3名（重複なし）

1. 上表からドキュメントカテゴリの必要関心領域を取得する（例: BE → INFRA → FE）
2. 各関心領域について、該当するステークホルダーを1名ずつ選定する
   - 同じ関心領域に複数のステークホルダーがいる場合、より専門性の高い方を選ぶ
   - 既に選定済みのステークホルダーは重複選定しない
3. 3名に満たない場合、隣接する関心領域から補充する
   - 隣接関係: BIZ↔DOMAIN↔MGMT, FE↔UX↔USER, BE↔INFRA↔SEC, QA（全技術系と隣接）
4. それでも不足する場合は MGMT または BIZ のステークホルダーで補充する
```

## 関心領域別レビュー観点

選定されたレビュアーには、その関心領域に基づく以下のレビュー観点を付与する。

| 関心領域 | レビュー観点 |
|---------|-----------|
| BIZ | ビジネス目標との整合性、ROI、投資対効果、競合優位性 |
| DOMAIN | ビジネスフローの正確性、業務ルールの網羅性、KPI達成への貢献 |
| MGMT | スコープの妥当性、スケジュールへの影響、リスク、実現可能性 |
| MKT | CVR改善への寄与、SEO対応、顧客体験、LTV向上施策 |
| FE | UI/UXの実装可能性、パフォーマンス、レスポンシブ対応、技術的負債 |
| BE | アーキテクチャの妥当性、API設計の整合性、スケーラビリティ、保守性 |
| INFRA | 可用性、コスト最適化、運用負荷、監視・アラート設計 |
| SEC | セキュリティリスク、認証・認可の妥当性、データ保護、コンプライアンス |
| QA | テスト容易性、要件の明確さ、エッジケースの網羅、品質メトリクス |
| UX | ブランド一貫性、ユーザビリティ、アクセシビリティ、デザインシステム準拠 |
| USER | 使いやすさ、わかりやすさ、操作フローの自然さ、情報の見つけやすさ |

**補足:** ステークホルダーが複数の関心領域に該当する場合、レビュー対象に最も関連の深い関心領域の観点を優先して付与する。

## ファイルパスからのカテゴリ判定

### Smallテンプレートの場合

フラットファイル構成のため、ファイル名から直接カテゴリを判定する:

```
docs/{phase}/{filename}.md
      ↑ フェーズ判定    ↑ ファイル名でカテゴリ判定
```

ファイル名とカテゴリの対応:

| ファイル名 | カテゴリ |
|----------|---------|
| project-overview.md | プロジェクト概要 |
| functional-requirements.md | 機能要件 |
| non-functional-requirements.md | 非機能要件 |
| architecture.md | アーキテクチャ方式 |
| infrastructure.md | インフラ・運用方式 |
| screen-design.md | 画面設計 |
| data-model.md | データモデル |
| api-design.md | API設計 |
| component-design.md | コンポーネント設計 |
| testing.md | テスト設計 |

### Fullテンプレートの場合

ディレクトリ構造からカテゴリを判定する:

```
docs/{phase}/{subcategory}/filename.md
      ↑ フェーズ判定    ↑ サブカテゴリ判定
```

- 第2階層（`01-requirements` 等）→ フェーズを特定
- 第3階層（`architecture/` 等）→ 上表のパスパターンと照合してサブカテゴリを特定
