---
name: mob-docs-init
description: "Webアプリケーションの設計ドキュメントプロジェクトを初期化するスキル。他のmob-docsスキル（requirements-definition, technical-design, basic-design, detailed-design, review-agent-teams）を実行する前に最初に実行する。ヒアリングによる設計書テンプレートの決定、MkDocs環境のセットアップ、ドキュメント構成の自動生成、CLAUDE.mdへのルール記載を行う。トリガー: (1)「プロジェクト初期化」「初期セットアップ」「init」に言及された時、(2) 設計ドキュメントの新規プロジェクトを開始する時、(3) MkDocs環境のセットアップを依頼された時、(4) mob-docsスキルを使い始める前の準備として。"
---

# 設計ドキュメントプロジェクト初期化スキル

他のmob-docsスキル群を使用する前に実行し、プロジェクトの基盤を構築する。

## ワークフロー概要

1. **ヒアリング** — アプリケーション概要・規模・前提条件の把握
2. **環境セットアップ** — Python仮想環境の作成とMkDocsのインストール
3. **ドキュメント構成の生成** — 規模に応じたフォルダ・テンプレートファイル群の自動生成
4. **CLAUDE.mdの設定** — 他のmob-docsスキルが正常動作するためのルール記載

## ステップ1: ヒアリング

AskUserQuestionツールを使い、以下の情報を段階的に収集する。一度に質問しすぎないこと（最大4問ずつ）。

### 第1回ヒアリング（必須）

1. **アプリケーション種別** — 何を構築するか（例: ECサイト、業務システム、SaaS等）
2. **ターゲットユーザー** — 主要なユーザー種別（例: 一般消費者、企業担当者、管理者等）
3. **設計書テンプレート** — Small / Full のいずれか
   - Small: 画面10未満、主要機能5未満、MVP・社内ツール・PoC（統合ファイル構成）
   - Full: 画面10以上、主要機能5以上、標準的なWebサービス以上（カテゴリ別ファイル構成）
4. **主要機能の概要** — 中核となる機能を3~5個

### 第2回ヒアリング（規模に応じて）

1. **外部連携** — 決済、認証、メール配信等の外部サービス連携の有無
2. **ユーザー種別の詳細** — エンドユーザーの区分（例: 顧客/管理者、購入者/出品者等）
3. **特別な要件** — リアルタイム性、多言語対応、大量データ処理等の特殊要件
4. **プロジェクト名** — ドキュメントのタイトルに使用する名称

### ヒアリング結果の整理

収集した情報を以下の形式で整理し、ユーザーに確認を取る：

```
プロジェクト名: {名称}
アプリケーション種別: {種別}
設計書テンプレート: {Small/Full}
主要ユーザー種別: {種別1}, {種別2}, ...
主要機能:
  - {機能1}
  - {機能2}
  - ...
外部連携: {連携先1}, {連携先2}, ...
特記事項: {特殊要件があれば}
```

## ステップ2: 環境セットアップ

### Python仮想環境の確認と作成

1. プロジェクトルートに `.venv` が存在するか確認する
2. 存在しない場合、`python -m venv .venv` で作成する
3. 仮想環境を有効化する

**プラットフォーム判定:**

- Windows: `.venv/Scripts/activate` を使用（bash環境の場合は `source .venv/Scripts/activate`）
- macOS/Linux: `source .venv/bin/activate` を使用

### MkDocsのインストール

仮想環境のアクティベート後:

```bash
pip install mkdocs-material
```

既にインストール済みの場合はスキップする。確認コマンド: `pip show mkdocs-material`

### 動作確認

インストール完了後、`mkdocs --version` で動作確認する。

## ステップ3: ドキュメント構成の生成

[references/scale-presets.md](references/scale-presets.md) を読み、ヒアリングで確定した設計書テンプレートのプリセットに従ってファイル群を生成する。

### 生成手順

1. `docs/` ディレクトリを作成する
2. `mkdocs.yml` を生成する → [references/mkdocs-config.md](references/mkdocs-config.md) を参照
3. `docs/index.md` を生成する（後述のフォーマット）
4. 各フェーズの `index.md` を生成する
5. 各成果物のテンプレートファイルを生成する

### docs/index.md のフォーマット

```markdown
# {プロジェクト名} 設計ドキュメント

## プロジェクト概要

{ヒアリング結果をここに記載}

| 項目 | 内容 |
|------|------|
| アプリケーション種別 | {種別} |
| 設計書テンプレート | {Small/Full} |
| 主要ユーザー種別 | {種別1}, {種別2}, ... |
| 外部連携 | {連携先一覧} |

### 主要機能

- {機能1}: {概要}
- {機能2}: {概要}
- ...

### 特記事項

{特殊要件があれば記載}

## ドキュメント構成

| フェーズ | 内容 | 目的 |
|---------|------|------|
| 要件定義 (01-requirements/index.md) | ビジネス要件・機能要件・非機能要件・ユースケース | 何を作るかを定義する |
| 方式設計 (02-technical-design/index.md) | アーキテクチャ・インフラ・セキュリティ・データ・運用方式 | どの技術で作るかを決める |
| 基本設計 (03-basic-design/index.md) | システム構成・画面設計・データモデル・API設計・バッチ設計 | どう作るかの全体像を設計する |
| 詳細設計 (04-detailed-design/index.md) | コンポーネント設計・シーケンス図・エラーハンドリング・テスト設計 | 実装レベルの詳細を設計する |

## 設計プロセスの流れ

{Mermaidフロー図}

!!! info "ドキュメントの進め方"
    各フェーズは上流から順に進めます。方式設計で技術方針を先に確定させることで、
    基本設計・詳細設計での手戻りを防ぎます。

## 成果物一覧

{scale-presets.mdの該当テンプレートの成果物一覧テーブルを記載}
```

### 各フェーズのindex.md

各フェーズの `index.md`（`01-requirements/index.md` 等）には以下を含める：

- セクション概要
- 構成説明（各カテゴリの役割）
- 成果物一覧テーブル（ステータス管理用）

### テンプレートファイルの生成

各成果物ファイルは以下の構造で生成する：

```markdown
# {ドキュメントタイトル}

<!-- 概要: このドキュメントの目的を簡潔に記載する -->

## {セクション1}

<!-- {このセクションに記載すべき内容のガイド} -->

## {セクション2}

<!-- {このセクションに記載すべき内容のガイド} -->
```

テンプレートのセクション構成は既存のmob-docsスキルのリファレンスガイドに準拠する。`<!-- ... -->` コメントは後続のスキルが内容を埋める際のガイドとして機能する。

**Medium/Large規模の場合:**

機能要件・ユースケース・画面定義・テーブル定義・API定義・バッチ定義等のファイルは、ヒアリングで得た機能一覧に基づいてファイル名を具体化する。ファイル名はケバブケース（小文字+ハイフン区切り）とする。

## ステップ4: CLAUDE.mdの設定

[references/claude-md-template.md](references/claude-md-template.md) を読み、プロジェクトの CLAUDE.md を作成・更新する。

### 確認事項

- 既存のCLAUDE.mdがある場合は内容を保持し、追記する
- CLAUDE.mdがない場合は新規作成する
- プレースホルダーをヒアリング結果で置き換える

## ステップ5: 最終確認

すべての生成が完了したら以下を実行する：

1. `mkdocs serve` でローカルプレビューを起動する
2. ブラウザでドキュメント構成が正しく表示されることを確認する
3. 問題があれば修正する
4. ユーザーに完了を報告し、次のステップ（mob-docs-requirements-definitionスキルで要件定義を開始）を案内する

## リファレンス

- **テンプレート別プリセット**（ドキュメント構成・成果物一覧・nav構成）:
  → [references/scale-presets.md](references/scale-presets.md) を読む

- **mkdocs.yml設定テンプレート**:
  → [references/mkdocs-config.md](references/mkdocs-config.md) を読む

- **CLAUDE.mdテンプレート**:
  → [references/claude-md-template.md](references/claude-md-template.md) を読む
