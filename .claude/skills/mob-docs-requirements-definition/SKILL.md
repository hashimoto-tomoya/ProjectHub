---
name: mob-docs-requirements-definition
description: Webアプリケーションの要件定義ドキュメント作成を支援するスキル。Small/Fullの設計書テンプレートに対応し、プロジェクト規模に応じた要件定義ドキュメントを体系的に作成する。Material for MkDocs形式のMarkdownで出力する。トリガー: (1) 要件定義書の作成・編集を依頼された時、(2) 「要件定義」「要件」「requirements」に言及された時、(3) プロジェクト概要・ビジネス要件・機能要件・非機能要件・ユースケースの作成を依頼された時、(4) Webアプリケーションの要件を整理・文書化する時。
---

# 要件定義ドキュメント作成スキル

## テンプレート判定

作業開始時にプロジェクトの CLAUDE.md を読み、「設計書テンプレート」の値（Small / Full）を確認する。
テンプレートの種別に応じてワークフロー・ファイル構成・成果物が変わるため、必ず最初に確認すること。

## ワークフロー概要

要件定義ドキュメントの作成は、設計書テンプレートに応じた以下のステップで進める。
各ステップは前のステップの成果物を参照するため、順序通りに進めること。

### Fullテンプレート（5ステップ）

1. **プロジェクト概要** — 背景・目的、スコープ、ステークホルダーの明確化
2. **ビジネス要件** — 業務フロー、ビジネスルール、KPIの定義
3. **機能要件** — 各機能モジュールの要件定義
4. **非機能要件** — 性能・可用性・セキュリティ等の品質要件定義
5. **ユースケース** — 顧客・管理者の利用シナリオ具体化

### Smallテンプレート（3ステップ）

1. **プロジェクト概要** — 背景・目的・スコープ・ステークホルダーを1ファイルに統合
2. **機能要件** — 全機能要件を1ファイルに統合
3. **非機能要件** — 全非機能要件を1ファイルに統合

Smallではビジネス要件・ユースケースは独立した成果物として作成しない。
必要に応じて、業務フローやビジネスルールの要点をプロジェクト概要や機能要件の中で簡潔に触れる。

## 作業プロセス

### 0. index.md の作成（初回のみ）

要件定義ドキュメントの作成に初めて着手する際、最初に `docs/01-requirements/index.md` を作成する。
index.md には以下を含める：

- セクション概要
- 構成説明（各セクションの役割）
- **成果物一覧テーブル**（ステータス管理用）

成果物一覧テーブルはテンプレートに応じて以下を使い分ける：

**Fullテンプレート:**

```markdown
| 成果物 | 説明 | ステータス |
|--------|------|-----------|
| プロジェクト概要 | 背景・目的・スコープ・ステークホルダー | 未着手 |
| ビジネス要件 | 業務フロー・ビジネスルール・KPI | 未着手 |
| 機能要件 | 各機能の要件定義 | 未着手 |
| 非機能要件 | 品質要件の定義 | 未着手 |
| ユースケース | 利用シナリオ | 未着手 |
```

**Smallテンプレート:**

```markdown
| 成果物 | 説明 | ステータス |
|--------|------|-----------|
| プロジェクト概要 | 背景・目的・スコープ・ステークホルダー | 未着手 |
| 機能要件 | 全機能の要件定義 | 未着手 |
| 非機能要件 | 品質要件の定義 | 未着手 |
```

初期状態ではすべて「未着手」とする。

### 1. 対象セクションの特定

ユーザーの依頼内容から作成対象を判断する：

- **タスク番号指定あり** → docs/index.md の「成果物一覧」から該当タスクに対応するファイル群を作成
- **セクション名指定あり** → 該当セクションのファイル群を作成
- **指定なし** → ステップ1（プロジェクト概要）から順に提案

### 2. 既存テンプレートの確認

対象ファイルを読み込み、テンプレート構造（見出し・プレースホルダーコメント）を確認する。
テンプレートの `<!-- ... -->` コメントは記載すべき内容のガイドである。

### 3. ユーザーとの対話による情報収集

ドキュメント作成に必要な情報をユーザーに質問する。質問は一度に3〜5個に抑え、段階的に深掘りする。

**質問の優先順位:**

1. ビジネス上の意思決定が必要な項目（スコープ判断、優先度 等）
2. ドメイン固有の知識が必要な項目（業界ルール、法規制 等）
3. 数値目標（KPI、性能目標 等）

Claudeの一般知識で補完可能な内容は、提案ベースで記述し確認を求める。

**Smallテンプレートの場合の注意:**
質問はコア要件に絞り、ビジネス要件やユースケースに関する詳細な深掘りは行わない。
プロジェクト概要の作成に必要な背景・スコープ情報と、主要機能・非機能要件に集中する。

### 4. ドキュメント作成

テンプレートのプレースホルダーを実際の内容に置き換える。

**出力ルール:**

- Material for MkDocs互換のMarkdown形式で記述する
- 図表はMermaid記法を使用する（フローチャート、シーケンス図、ER図等）
- テーブルはMarkdownテーブルを使用する
- Admonition（`!!! note`、`!!! warning` 等）を適宜活用する
- `<!-- ... -->` プレースホルダーコメントは残さず、すべて実際の内容に置き換える

**記述スタイル:**

- 簡潔で明確な日本語を使用する
- 曖昧な表現を避け、定量的に記述する
- 「〜すべき」「〜とする」等の要件記述の定型表現を使用する
- 未確定事項には `!!! warning "要確認"` アドモニションを付与する

**Smallテンプレートの場合の記述方針:**

- 各統合ファイル内ではH2レベルで大分類、H3レベルで小分類に整理する
- Fullで独立ファイルとなる内容をセクションとして1ファイルにまとめる
- 記述の粒度はFullより粗くてよい（概要レベルで十分な項目はテーブル1つで済ませる等）
- ただし、要件として不足がないよう必要な項目は漏れなく記載する

### 5. レビューと更新

作成したドキュメントの要約をユーザーに提示し、フィードバックを反映する。

## セクション別リファレンス

各セクションの詳細な作成ガイドは以下のリファレンスを参照する。
テンプレートによって参照するガイドと使い方が異なる。

### Fullテンプレート

- **プロジェクト概要**（background.md / scope.md / stakeholders.md）の作成時:
  → [references/project-overview-guide.md](references/project-overview-guide.md) を読む

- **ビジネス要件**（business-flow.md / business-rules.md / kpi.md）の作成時:
  → [references/business-requirements-guide.md](references/business-requirements-guide.md) を読む

- **機能要件**（各機能モジュール）の作成時:
  → [references/functional-requirements-guide.md](references/functional-requirements-guide.md) を読む

- **非機能要件**（performance.md / availability.md / scalability.md / security.md / compliance.md）の作成時:
  → [references/non-functional-requirements-guide.md](references/non-functional-requirements-guide.md) を読む

- **ユースケース**（エンドユーザー + 管理者）の作成時:
  → [references/use-cases-guide.md](references/use-cases-guide.md) を読む

### Smallテンプレート

- **プロジェクト概要**（project-overview.md）の作成時:
  → [references/project-overview-guide.md](references/project-overview-guide.md) を読む
  → ガイド内の「Smallテンプレートの場合」セクションに従い、1ファイルに統合する

- **機能要件**（functional-requirements.md）の作成時:
  → [references/functional-requirements-guide.md](references/functional-requirements-guide.md) を読む
  → ガイド内の「Smallテンプレートの場合」セクションに従い、1ファイルに統合する

- **非機能要件**（non-functional-requirements.md）の作成時:
  → [references/non-functional-requirements-guide.md](references/non-functional-requirements-guide.md) を読む
  → ガイド内の「Smallテンプレートの場合」セクションに従い、1ファイルに統合する

## ファイル構成

要件定義ドキュメントは `docs/01-requirements/` 配下に格納する。

### Fullテンプレート

```
docs/01-requirements/
├── index.md                          # セクション概要・進捗管理
├── project-overview/
│   ├── background.md                 # 背景・目的
│   ├── scope.md                      # スコープ定義
│   └── stakeholders.md               # ステークホルダー
├── business-requirements/
│   ├── business-flow.md              # 業務フロー
│   ├── business-rules.md             # ビジネスルール
│   └── kpi.md                        # KPI・目標指標
├── functional-requirements/
│   ├── {機能モジュール名}.md          # 機能ごとに1ファイル（プロジェクトに応じて増減）
│   └── ...
├── non-functional-requirements/
│   ├── performance.md                # 性能要件
│   ├── availability.md               # 可用性要件
│   ├── scalability.md                # 拡張性要件
│   ├── security.md                   # セキュリティ要件
│   └── compliance.md                 # 法規制・コンプライアンス
└── use-cases/
    ├── {エンドユーザー種別}/
    │   └── {ユースケース名}.md        # ユースケースごとに1ファイル
    └── admin/
        └── {ユースケース名}.md
```

### Smallテンプレート

```
docs/01-requirements/
├── index.md                          # セクション概要・進捗管理
├── project-overview.md               # 背景・目的・スコープ・ステークホルダーを統合
├── functional-requirements.md        # 全機能要件を統合
└── non-functional-requirements.md    # 全非機能要件を統合
```

## セクション間の依存関係

### Fullテンプレート

```
プロジェクト概要 ──→ ビジネス要件 ──→ 機能要件 ──→ 非機能要件
                                        │                │
                                        └──→ ユースケース ←┘
```

- ビジネス要件はプロジェクト概要のスコープに基づく
- 機能要件はビジネス要件の業務フロー・ルールを実現する
- 非機能要件は機能要件の品質特性を定義する
- ユースケースは機能要件とビジネスルールを具体的シナリオで統合する

### Smallテンプレート

```
プロジェクト概要 ──→ 機能要件 ──→ 非機能要件
```

- プロジェクト概要のスコープ・背景に基づいて機能要件を定義する
- 非機能要件は機能要件の品質特性を定義する

## ステータス管理

`index.md` の成果物一覧テーブルのステータスを以下のタイミングで更新する：

| ステータス | 更新タイミング |
|-----------|---------------|
| 未着手 | index.md 作成時の初期値 |
| 対応中 | セクションのドキュメント作成に着手した時 |
| 完了 | セクションのすべてのドキュメントが作成完了した時 |

**重要:** セクションの作成に着手する際は、ドキュメント編集の前に必ずステータスを「対応中」に更新すること。
